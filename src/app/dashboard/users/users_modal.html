<!-- User Edit/Add Modal -->
<div class="modal-backdrop" *ngIf="showModal()">
    <div class="modal-container">
        <div class="modal-top">
            <h2>{{ isEditing() ? 'Edit User' : 'Add New User' }}</h2>
            <button class="close-modal" (click)="closeModal()">Ã—</button>
        </div>
        <form (ngSubmit)="saveUser()" class="user-form">
            <div class="field">
                <label>Name</label>
                <input type="text" [ngModel]="currentUser().name"
                    (ngModelChange)="currentUser.set({...currentUser(), name: $event})" name="name" required
                    placeholder="Full Name">
            </div>
            <div class="field">
                <label>Email</label>
                <input type="email" [ngModel]="currentUser().email"
                    (ngModelChange)="currentUser.set({...currentUser(), email: $event})" name="email" required
                    placeholder="Email Address">
            </div>
            <div class="field" *ngIf="!isEditing()">
                <label>Password</label>
                <input type="password" [ngModel]="currentUser().password"
                    (ngModelChange)="currentUser.set({...currentUser(), password: $event})" name="password" required
                    placeholder="Password">
            </div>
            <div class="field" *ngIf="!isEditing()">
                <label>Role</label>
                <select [ngModel]="currentUser().role"
                    (ngModelChange)="currentUser.set({...currentUser(), role: $event})" name="role">
                    <option value="USER">User</option>
                    <option value="ADMIN">Admin</option>
                </select>
            </div>
            <div class="field checkbox-field" *ngIf="!isEditing()">
                <label>
                    <input type="checkbox" [ngModel]="currentUser().isActive"
                        (ngModelChange)="currentUser.set({...currentUser(), isActive: $event})" name="isActive">
                    Active
                </label>
            </div>
            <div class="form-footer">
                <button type="button" class="btn-cancel" (click)="closeModal()">Cancel</button>
                <button type="submit" class="btn-submit">{{ isEditing() ? 'Update' : 'Create' }}</button>
            </div>
        </form>
    </div>
</div>